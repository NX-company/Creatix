# 💎 PRO Mode - GPT-4o + DALL-E 3 HD

## 🚀 Что это?

**PRO режим** - премиум версия приложения с использованием лучших моделей OpenAI:
- **GPT-4o** для анализа и генерации контента
- **DALL-E 3 HD** для создания изображений высокого качества
- Поддержка **анализа видео**

---

## ✨ Возможности PRO режима

### 1. **Мультимодальность GPT-4o**
- ✅ Видит и анализирует загруженные фото
- ✅ Анализирует видео (извлекает контент и ключевые моменты)
- ✅ Понимает парсенные сайты
- ✅ Создаёт контент на основе визуальных материалов

### 2. **DALL-E 3 HD изображения**
- ✅ Качество **HD** (1024x1024)
- ✅ Стиль **vivid** (яркий и живой)
- ✅ Автоматическая оптимизация промптов
- ✅ Контекстно-релевантные изображения

### 3. **Анализ видео**
- ✅ Загрузка видео файлов
- ✅ Анализ содержимого
- ✅ Создание документов на основе видео
- ✅ Извлечение ключевых моментов

---

## 🏗️ Архитектура PRO режима

```
┌─────────────────────────────────────────────┐
│          USER PROMPT + MEDIA                │
│   (text, images, video, parsed websites)    │
└────────────────┬────────────────────────────┘
                 │
                 ▼
    ┌────────────────────────────┐
    │   GPT-4o Text Agent        │
    │   • Анализирует медиа      │
    │   • Создаёт JSON контент   │
    │   • Учитывает контекст     │
    └────────────┬───────────────┘
                 │
                 ▼
    ┌────────────────────────────┐
    │  GPT-4o Content Analyzer   │
    │  • Анализирует контент     │
    │  • Планирует изображения   │
    │  • Создаёт промпты         │
    └────────────┬───────────────┘
                 │
                 ▼
    ┌────────────────────────────┐
    │   DALL-E 3 Image Agent     │
    │   • Генерирует HD images   │
    │   • Quality: HD            │
    │   • Style: vivid           │
    └────────────┬───────────────┘
                 │
                 ▼
    ┌────────────────────────────┐
    │  GPT-4o HTML Composer      │
    │  • Собирает финальный HTML │
    │  • Вставляет изображения   │
    │  • Применяет стили         │
    └────────────┬───────────────┘
                 │
                 ▼
         ┌──────────────┐
         │ FINAL OUTPUT │
         │  HTML + JSON │
         └──────────────┘
```

---

## 🔧 Технические детали

### **Используемые модели:**
- **Text Agent**: `gpt-4o` (OpenAI)
- **Content Analyzer**: `gpt-4o` (OpenAI)
- **HTML Composer**: `gpt-4o` (OpenAI)
- **Image Generator**: `dall-e-3` (OpenAI HD)

### **API ключи:**
```env
OPENAI_API_KEY=sk-proj-...
```

### **Новые файлы:**
- `lib/api-openai.ts` - обёртка для OpenAI API
- `lib/agents/dalleAgent.ts` - агент для DALL-E 3
- Обновлены: orchestrator, modes, agents config

---

## 🎯 Отличия от других режимов

| Функция | Free | Advanced | PRO |
|---------|------|----------|-----|
| **Текстовая модель** | Gemini 2.5 Flash Lite | Gemini 2.0 Flash | **GPT-4o** |
| **Изображения** | ❌ | Flux Schnell | **DALL-E 3 HD** |
| **Качество изображений** | - | Standard | **HD (1024x1024)** |
| **Анализ фото** | ❌ | ✅ | ✅ |
| **Анализ видео** | ❌ | ❌ | **✅** |
| **Парсинг сайтов** | ❌ | ✅ | ✅ |
| **QA проверка** | ❌ | ❌ | ❌ |
| **Стоимость** | Низкая | Средняя | Высокая |

---

## 💡 Когда использовать PRO?

### ✅ **Используйте PRO для:**
- Создания премиум контента
- Работы с видео материалами
- Максимального качества изображений
- Сложного визуального анализа
- Коммерческих проектов

### ⚠️ **НЕ используйте PRO для:**
- Простых текстовых документов
- Тестирования функций
- Экономии бюджета
- Базовой генерации

---

## 🔄 Как работает контекстная память в PRO?

PRO режим использует **ту же систему памяти** что и Advanced:

```typescript
// Контекст включает:
✅ lastGeneratedContent      // Последний JSON контент
✅ lastGeneratedImages        // Промпты сгенерированных изображений
✅ selectedElement            // Выбранный элемент в preview
✅ messages (last 10)         // История диалога
✅ uploadedImages[]           // Загруженные фото/видео
✅ parsedWebsiteData          // Данные с сайтов
```

**GPT-4o видит ВСЁ** и использует для генерации!

---

## 📊 Стоимость использования

### **OpenAI API Pricing:**
- **GPT-4o**: ~$2.50 / 1M input tokens, ~$10 / 1M output tokens
- **DALL-E 3 HD**: ~$0.080 / image (1024x1024)

### **Примерная стоимость 1 документа:**
- Текст (GPT-4o): ~$0.05-0.15
- 3 HD изображения (DALL-E 3): ~$0.24
- **Итого**: ~$0.30-0.40 за документ

*(Значительно дороже Advanced режима)*

---

## 🐛 Troubleshooting

### **"No credits available"**
- Проверьте баланс на platform.openai.com/usage
- Пополните баланс OpenAI

### **"Content policy violation"**
- Промпт нарушает политику OpenAI
- Измените формулировку запроса
- Система автоматически пропустит такое изображение

### **Видео не анализируется**
- Убедитесь что включён PRO режим
- Проверьте формат видео (mp4, mov, avi)
- Размер видео не должен превышать 20MB

---

## 🚀 Быстрый старт

1. **Включите PRO режим:**
   - В левом меню найдите "Режим работы"
   - Нажмите на кнопку "💎 PRO"

2. **Загрузите медиа:**
   - Фото: автоматически анализируется
   - Видео: GPT-4o извлечёт ключевые моменты

3. **Создайте документ:**
   ```
   Пример: "Создай презентацию компании на основе этого видео"
   ```

4. **Получите результат:**
   - Контент от GPT-4o
   - HD изображения от DALL-E 3
   - Профессиональный HTML

---

## 📝 Примеры использования

### **Пример 1: Презентация из видео**
```
1. Загрузите видео о продукте
2. "Создай презентацию компании на основе видео"
3. GPT-4o проанализирует видео → DALL-E 3 создаст изображения
```

### **Пример 2: Карточка товара с фото**
```
1. Загрузите фото товара
2. "Создай карточку товара для WB"
3. GPT-4o увидит товар → DALL-E 3 создаст доп. изображения
```

### **Пример 3: КП на основе сайта**
```
1. Спарсите сайт конкурента
2. "Создай КП лучше чем у конкурента"
3. GPT-4o проанализирует → создаст улучшенное КП
```

---

## ✅ Чек-лист реализации

- [x] Добавлен OpenAI API ключ
- [x] Создан `lib/api-openai.ts`
- [x] Создан `lib/agents/dalleAgent.ts`
- [x] Обновлён orchestrator для PRO
- [x] Включена PRO кнопка в UI
- [x] Поддержка видео в FileUploader
- [x] Контекстная память работает
- [x] Все типы документов поддерживаются
- [x] Без QA проверки (быстрая генерация)

---

## 🎉 Готово к использованию!

PRO режим **полностью реализован** и готов к работе!

**Перезапустите приложение** и попробуйте новые возможности! 💎


