# ‚úÖ DALL-E 3 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ó–∞–≤–µ—Ä—à–µ–Ω–∞

## üéØ –ß—Ç–æ –°–¥–µ–ª–∞–Ω–æ

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω `https-proxy-agent` –¥–ª—è –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ OpenAI API

### 2. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (.env.local)
```env
REPLICATE_API_TOKEN=r8_60fbHrFNfAJ0Udh9gVQs0Yo3dQuxSDg3Hy63d
NEXT_PUBLIC_OPENROUTER_API_KEY=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
OPENAI_API_KEY=sk-proj-XAIc3f7uWfkFhz_2S7_Ng7vDlEy3pVGjM3s8xS8VWssgm6vDlgVVuiUgbLDOcRIEVDg1LlQoHlT3BlbkFJq2kHhO5oBHsFQ0kQvLSY0a0tYVQVFhqz_A4b2nKvM_WU2c9hznZnWVBi4aywp3WxXDBvzD34A

# –ü—Ä–æ–∫—Å–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è OpenAI API
PROXY_HOST=190.111.161.56
PROXY_PORT=9694
PROXY_LOGIN=DxubBS
PROXY_PASSWORD=Hd7L14
```

### 3. –°–æ–∑–¥–∞–Ω–Ω—ã–µ –§–∞–π–ª—ã

#### `app/api/dalle-generate/route.ts`
- API route –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —á–µ—Ä–µ–∑ DALL-E 3
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç OpenAI SDK —Å –ø—Ä–æ–∫—Å–∏-–∞–≥–µ–Ω—Ç–æ–º (https-proxy-agent)
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
  - Model: `dall-e-3`
  - Size: `1024x1024`
  - Quality: `hd`
  - Response format: `url` ‚Üí –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –≤ base64 data URL
- –ü–æ–ª–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —ç—Ç–∞–ø–æ–≤
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π

#### `lib/agents/dalleAgent.ts`
- –ê–≥–µ–Ω—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å DALL-E 3
- –§—É–Ω–∫—Ü–∏–∏:
  - `generateImageWithDALLE(prompt)` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ–¥–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
  - `generateImagesWithDALLE(imagePlans)` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –º–∞—Å—Å–∏–≤–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –ø–æ –ø–ª–∞–Ω—É
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `/api/dalle-generate` route
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

### 4. –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –§–∞–π–ª—ã

#### `lib/config/modes.ts`
**–ò–∑–º–µ–Ω–µ–Ω–æ –≤ PRO —Ä–µ–∂–∏–º–µ:**
```typescript
pro: {
  name: 'PRO',
  icon: 'üíé',
  description: 'GPT-4o + DALL-E 3 HD + –≤–∏–¥–µ–æ',  // –û–±–Ω–æ–≤–ª–µ–Ω–æ –æ–ø–∏—Å–∞–Ω–∏–µ
  models: {
    image: {
      provider: 'openai',              // –ë—ã–ª–æ: 'replicate'
      model: 'dall-e-3',              // –ë—ã–ª–æ: 'black-forest-labs/flux-pro'
      size: '1024x1024',              // –ë—ã–ª–æ: width/height
      quality: 'hd',                  // –ù–æ–≤–æ–µ
    },
  },
}
```

#### `lib/agents/orchestrator.ts`
**–î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç:**
```typescript
import { generateImagesWithDALLE } from './dalleAgent'
```

**–û–±–Ω–æ–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ PRO —Ä–µ–∂–∏–º–∞:**
```typescript
} else if (mode === 'pro') {
  console.log('\nüíé ========== PRO MODE ==========')
  console.log('ü§ñ Using GPT-4o + DALL-E 3 HD\n')
  
  // Step 1: GPT-4o –¥–ª—è —Ç–µ–∫—Å—Ç–∞
  content = await generateContentWithGPT4o(prompt, docType, uploadedImages)
  
  // Step 2: GPT-4o –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç –∏ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
  contentAnalysis = await analyzeContentForImages(prompt, content, docType, previousFeedback)
  
  // Step 3: DALL-E 3 –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç HD –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
  generatedImages = await generateImagesWithDALLE(contentAnalysis.imagePrompts)
  
  // Step 4: GPT-4o —Å–æ–±–∏—Ä–∞–µ—Ç HTML
  html = await generateHTMLWithGPT4o(content, docType, styleConfig, allImages)
  
  html = replaceImagePlaceholders(html, generatedImages)
  
  console.log('\n‚úÖ PRO mode generation complete!')
  qaApproved = true
}
```

## üöÄ –ö–∞–∫ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### 1. –ó–∞–ø—É—Å–∫ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```bash
npm run dev
```
–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –Ω–∞ http://localhost:3000

### 2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ PRO –†–µ–∂–∏–º–∞
1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
2. –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞ (–õ–æ–≥–æ, –ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è, –ö–æ–º–º–µ—Ä—á–µ—Å–∫–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –∏ —Ç.–¥.)
3. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É **"üíé PRO"** –≤ –ª–µ–≤–æ–π –ø–∞–Ω–µ–ª–∏
4. –í–≤–µ–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å, –Ω–∞–ø—Ä–∏–º–µ—Ä: "–°–æ–∑–¥–∞–π –ª–æ–≥–æ –¥–ª—è –∫–æ—Ñ–µ–π–Ω–∏ CoffeeLab"
5. –ù–∞–∂–º–∏—Ç–µ Enter –∏–ª–∏ –∫–Ω–æ–ø–∫—É –æ—Ç–ø—Ä–∞–≤–∫–∏

### 3. –ü—Ä–æ—Ü–µ—Å—Å –ì–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≤ PRO –†–µ–∂–∏–º–µ
```
ü§ñ GPT-4o Text Agent ‚Üí –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç
      ‚Üì
üîç GPT-4o Content Analyzer ‚Üí –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∏ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
      ‚Üì
üé® DALL-E 3 Agent ‚Üí –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç HD –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏
      ‚Üì
üèóÔ∏è GPT-4o HTML Composer ‚Üí –°–æ–±–∏—Ä–∞–µ—Ç —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç
      ‚Üì
‚úÖ –ì–æ—Ç–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç —Å HD –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏
```

## üÜö –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –†–µ–∂–∏–º–æ–≤

| –§—É–Ω–∫—Ü–∏—è | –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π | –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π | PRO |
|---------|------------|-------------|-----|
| **–¢–µ–∫—Å—Ç–æ–≤–∞—è –º–æ–¥–µ–ª—å** | Gemini 2.5 Flash Lite | Gemini 2.0 Flash | GPT-4o |
| **–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è** | ‚ùå | Flux Schnell | DALL-E 3 HD |
| **–ê–Ω–∞–ª–∏–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π** | ‚ùå | ‚úÖ | ‚úÖ |
| **–ü–∞—Ä—Å–∏–Ω–≥ —Å–∞–π—Ç–æ–≤** | ‚ùå | ‚úÖ | ‚úÖ |
| **–ê–Ω–∞–ª–∏–∑ –≤–∏–¥–µ–æ** | ‚ùå | ‚ùå | ‚úÖ (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ) |
| **–ö–∞—á–µ—Å—Ç–≤–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π** | - | –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ | HD |
| **QA Agent** | ‚ùå | ‚úÖ | ‚ùå (–æ—Ç–∫–ª—é—á–µ–Ω) |

## üîë –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ DALL-E 3

1. **HD –ö–∞—á–µ—Å—Ç–≤–æ** - –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ 1024x1024 —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `quality: 'hd'`
2. **–õ—É—á—à–µ–µ –ü–æ–Ω–∏–º–∞–Ω–∏–µ** - GPT-4o —Å–æ–∑–¥–∞–µ—Ç –ø—Ä–æ–º–ø—Ç—ã, DALL-E 3 –∏—Ö –ø–æ–Ω–∏–º–∞–µ—Ç –Ω–∞ —É—Ä–æ–≤–Ω–µ GPT
3. **–î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è** - –ë–æ–ª–µ–µ —Ç–æ—á–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª–æ–∂–Ω—ã—Ö —Å—Ü–µ–Ω –∏ –∫–æ–Ω—Ü–µ–ø—Ü–∏–π
4. **–¢–µ–∫—Å—Ç –≤ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è—Ö** - DALL-E 3 –º–æ–∂–µ—Ç –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —á–∏—Ç–∞–µ–º—ã–π —Ç–µ–∫—Å—Ç
5. **–°—Ç–∏–ª–∏—Å—Ç–∏—á–µ—Å–∫–∞—è –°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å** - –ï–¥–∏–Ω—ã–π —Å—Ç–∏–ª—å –≤–æ –≤—Å–µ—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è—Ö

## üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –î–µ—Ç–∞–ª–∏

### –ü—Ä–æ–∫—Å–∏ –ù–∞—Å—Ç—Ä–æ–π–∫–∞
–í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∫ OpenAI API –ø—Ä–æ—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏:
- **Host**: 190.111.161.56
- **Port**: 9694
- **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**: HTTP Basic Auth

### API Endpoints
1. `/api/dalle-generate` - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —á–µ—Ä–µ–∑ DALL-E 3
2. `/api/gpt4o-generate` - –¢–µ–∫—Å—Ç–æ–≤–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ –∞–Ω–∞–ª–∏–∑ —á–µ—Ä–µ–∑ GPT-4o

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –û—à–∏–±–æ–∫
- –í—Å–µ –æ—à–∏–±–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
- –ü—Ä–æ–∫—Å–∏ –æ—à–∏–±–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π retry –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–±–æ–µ–≤ API

## üìä –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- **DALL-E 3**: ~20-30 —Å–µ–∫—É–Ω–¥ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (—á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏)
- **GPT-4o**: ~3-8 —Å–µ–∫—É–Ω–¥ –Ω–∞ –∑–∞–ø—Ä–æ—Å
- **–û–±—â–µ–µ –≤—Ä–µ–º—è PRO —Ä–µ–∂–∏–º–∞** (–¥–ª—è 3 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π): ~90-120 —Å–µ–∫—É–Ω–¥

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–æ—á–Ω—ã–π –ß–µ–∫-–õ–∏—Å—Ç

- [x] –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω `https-proxy-agent`
- [x] –°–æ–∑–¥–∞–Ω `.env.local` —Å OpenAI –∫–ª—é—á–æ–º –∏ –ø—Ä–æ–∫—Å–∏
- [x] –°–æ–∑–¥–∞–Ω API route `/api/dalle-generate`
- [x] –°–æ–∑–¥–∞–Ω –∞–≥–µ–Ω—Ç `/lib/agents/dalleAgent.ts`
- [x] –û–±–Ω–æ–≤–ª–µ–Ω `/lib/config/modes.ts`
- [x] –û–±–Ω–æ–≤–ª–µ–Ω `/lib/agents/orchestrator.ts`
- [x] –ù–µ—Ç –æ—à–∏–±–æ–∫ –ª–∏–Ω—Ç–µ—Ä–∞
- [x] –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç

## üéâ –ì–æ—Ç–æ–≤–æ –∫ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

PRO —Ä–µ–∂–∏–º —Å DALL-E 3 –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ.
–í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –ø—Ä–æ—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –≤ HD –∫–∞—á–µ—Å—Ç–≤–µ.

**–ó–∞–ø—É—Å–∫–∞–π—Ç–µ –∏ —Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ!** üöÄ


