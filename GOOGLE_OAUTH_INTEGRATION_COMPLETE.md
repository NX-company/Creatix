# Google OAuth Integration - Complete! ‚úÖ

## –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ:

### 1. ‚úÖ Google OAuth –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ Google (–æ–¥–Ω–∏–º –∫–ª–∏–∫–æ–º)
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –≤—Ö–æ–¥–∏—Ç—å —á–µ—Ä–µ–∑ Google
- –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –≤—Ö–æ–¥–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–∫–∫–∞—É–Ω—Ç —Å —Ç—Ä–∏–∞–ª–æ–º –Ω–∞ 3 –¥–Ω—è

### 2. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω REPLICATE_API_TOKEN
- –¢–æ–∫–µ–Ω –æ–±–Ω–æ–≤–ª–µ–Ω –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

### 3. ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω NextAuth –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

#### `app/page.tsx`
- –î–æ–±–∞–≤–ª–µ–Ω `useSession()` –∏–∑ `next-auth/react`
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è NextAuth —Å–µ—Å—Å–∏—è –≤–º–µ—Å—Ç–æ —Å—Ç–∞—Ä–æ–≥–æ `/api/auth/me`
- –ï—Å–ª–∏ —é–∑–µ—Ä –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω —á–µ—Ä–µ–∑ Google ‚Üí guest mode –æ—Ç–∫–ª—é—á–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

#### `components/Sidebar.tsx`
- –£–±—Ä–∞–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ `/api/auth/me`
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `useSession()` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö —é–∑–µ—Ä–∞
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–º—è –∏–∑ Google –ø—Ä–æ—Ñ–∏–ª—è (–∏–ª–∏ email)
- –ö–Ω–æ–ø–∫–∞ –≤—ã—Ö–æ–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `signOut()` –∏–∑ NextAuth

#### `middleware.ts`
- –£–±—Ä–∞–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ä–æ–≥–æ `auth-token`
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `getToken()` –∏–∑ `next-auth/jwt`
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç NextAuth —Å–µ—Å—Å–∏—é –¥–ª—è –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö —Ä–æ—É—Ç–æ–≤
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç guest mode —á–µ—Ä–µ–∑ URL –ø–∞—Ä–∞–º–µ—Ç—Ä `?guest=true`

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ Google:
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–¥–µ—Ç –Ω–∞ `/register`
2. –ù–∞–∂–∏–º–∞–µ—Ç "–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ Google"
3. –í—ã–±–∏—Ä–∞–µ—Ç —Å–≤–æ–π Google –∞–∫–∫–∞—É–Ω—Ç
4. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–∫–∫–∞—É–Ω—Ç –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
5. –ü–æ–ª—É—á–∞–µ—Ç —Ç—Ä–∏–∞–ª –Ω–∞ 3 –¥–Ω—è + 30 –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö –≥–µ–Ω–µ—Ä–∞—Ü–∏–π
6. –ü–æ–ø–∞–¥–∞–µ—Ç –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É

### –í—Ö–æ–¥ —á–µ—Ä–µ–∑ Google:
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–¥–µ—Ç –Ω–∞ `/login`
2. –ù–∞–∂–∏–º–∞–µ—Ç "–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Google"
3. –í—ã–±–∏—Ä–∞–µ—Ç —Å–≤–æ–π Google –∞–∫–∫–∞—É–Ω—Ç
4. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—Ö–æ–¥–∏—Ç –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
5. –ü–æ–ø–∞–¥–∞–µ—Ç –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É

### –ù–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ:
- ‚úÖ Sidebar –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ Google
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ä–µ–∂–∏–º (FREE/ADVANCED/PRO)
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Å—Ç–∞—Ç—É—Å —Ç—Ä–∏–∞–ª–∞
- ‚úÖ –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ —Ç.–¥.)

## –î–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω–∞ (aicreatix.ru):

### –í Google Cloud Console –¥–æ–±–∞–≤—å:
```
Authorized redirect URIs:
- http://localhost:3000/api/auth/callback/google (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
- https://aicreatix.ru/api/auth/callback/google (–¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω–∞)
- https://www.aicreatix.ru/api/auth/callback/google (—Å www)
```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞ Vercel —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã:
–ò—Å–ø–æ–ª—å–∑—É–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è:
```powershell
.\upload-env-to-vercel.ps1
```

–ò –∑–∞–¥–µ–ø–ª–æ–π:
```bash
vercel --prod
```

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –º–æ–¥–µ–ª—å `Account` –¥–ª—è OAuth –∞–∫–∫–∞—É–Ω—Ç–æ–≤
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –º–æ–¥–µ–ª—å `VerificationToken` –¥–ª—è NextAuth
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ –º–æ–¥–µ–ª—å `Session` (NextAuth-—Å–æ–≤–º–µ—Å—Ç–∏–º–∞—è)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `name` –≤ –º–æ–¥–µ–ª—å `User`
- ‚úÖ –ü–æ–ª—è `username` –∏ `password` —Ç–µ–ø–µ—Ä—å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ (–¥–ª—è OAuth —é–∑–µ—Ä–æ–≤)

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è NextAuth:
- Provider: Google OAuth
- Adapter: PrismaAdapter
- Session strategy: database
- Callbacks: –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –¥–ª—è —Ç—Ä–∏–∞–ª–∞ –∏ appMode
- AllowDangerousEmailAccountLinking: true (–¥–ª—è —Å–≤—è–∑–∏ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ email)

### Guest Mode:
- –û—Å—Ç–∞–µ—Ç—Å—è —Ä–∞–±–æ—á–∏–º –¥–ª—è –Ω–µ–∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- 3 –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–∫–ª—é—á–∞–µ—Ç—Å—è –ø—Ä–∏ –≤—Ö–æ–¥–µ —á–µ—Ä–µ–∑ Google

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã:

### –õ–æ–∫–∞–ª—å–Ω–æ:
1. –û—Ç–∫—Ä–æ–π http://localhost:3000/login
2. –ù–∞–∂–º–∏ "–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Google"
3. –í—ã–±–µ—Ä–∏ —Å–≤–æ–π –∞–∫–∫–∞—É–Ω—Ç
4. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ:
   - –ò–º—è –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤ Sidebar
   - –ú–æ–∂–Ω–æ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç—ã
   - –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è (REPLICATE —Ç–æ–∫–µ–Ω –≤–∞–ª–∏–¥–Ω—ã–π)
   - AI –æ—Ç–≤–µ—á–∞–µ—Ç (OPENROUTER —Ç–æ–∫–µ–Ω –≤–∞–ª–∏–¥–Ω—ã–π)

### –ù–∞ –ø—Ä–æ–¥–∞–∫—à–Ω–µ:
–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –Ω–∞ Vercel –ø—Ä–æ–≤–µ—Ä—å —Ç–æ –∂–µ —Å–∞–º–æ–µ –Ω–∞ https://aicreatix.ru

## –í—Å–µ –≥–æ—Ç–æ–≤–æ! üéâ

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Ç–µ–ø–µ—Ä—å –º–æ–≥—É—Ç:
- ‚úÖ –í—Ö–æ–¥–∏—Ç—å –æ–¥–Ω–∏–º –∫–ª–∏–∫–æ–º —á–µ—Ä–µ–∑ Google
- ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –æ–¥–Ω–∏–º –∫–ª–∏–∫–æ–º —á–µ—Ä–µ–∑ Google
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- ‚úÖ –í–∏–¥–µ—Ç—å —Å–≤–æ–µ –∏–º—è –∏–∑ Google –ø—Ä–æ—Ñ–∏–ª—è
- ‚úÖ –ü–æ–ª—É—á–∞—Ç—å —Ç—Ä–∏–∞–ª –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

Google OAuth –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç! üöÄ

