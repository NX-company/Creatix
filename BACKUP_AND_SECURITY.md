# üõ°Ô∏è –°–ò–°–¢–ï–ú–ê –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–ò –ò –†–ï–ó–ï–†–í–ù–û–ì–û –ö–û–ü–ò–†–û–í–ê–ù–ò–Ø

> **‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û:** –≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–∏—Å—Ç–µ–º–µ –∑–∞—â–∏—Ç—ã –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞ Creatix. –í—Å–µ AI –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç—ã –∏ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –û–ë–Ø–ó–ê–ù–´ –∏–∑—É—á–∏—Ç—å —ç—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –ø–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –ª—é–±—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ –¥–µ–ø–ª–æ–µ–º.

---

## üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–ê–í–ò–õ–ê (–î–õ–Ø AI –ê–°–°–ò–°–¢–ï–ù–¢–û–í)

### ‚ùå –ö–ê–¢–ï–ì–û–†–ò–ß–ï–°–ö–ò –ó–ê–ü–†–ï–©–ï–ù–û:

1. **–ù–ò–ö–û–ì–î–ê –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `prisma db push --accept-data-loss`**
   - –≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –£–ù–ò–ß–¢–û–ñ–ê–ï–¢ –í–°–ï –î–ê–ù–ù–´–ï
   - –ò—Å–ø–æ–ª—å–∑—É–π –≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ: `prisma db push --skip-generate`

2. **–ù–ò–ö–û–ì–î–ê –Ω–µ –≤—ã–ø–æ–ª–Ω—è—Ç—å –¥–µ–ø–ª–æ–π –±–µ–∑ –±—ç–∫–∞–ø–∞**
   - –í—Å–µ–≥–¥–∞ —Å–æ–∑–¥–∞–≤–∞–π –±—ç–∫–∞–ø –ü–ï–†–ï–î –ª—é–±—ã–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ –ë–î
   - Deploy.sh —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –±—ç–∫–∞–ø

3. **–ù–ò–ö–û–ì–î–ê –Ω–µ –∑–∞–ø—É—Å–∫–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞–ø—Ä—è–º—É—é –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ**
   - –¢–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ deploy.sh (—Å –∞–≤—Ç–æ–±—ç–∫–∞–ø–æ–º)
   - –ò–ª–∏ –≤—Ä—É—á–Ω—É—é —Å –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–º –±—ç–∫–∞–ø–æ–º

4. **–ù–ò–ö–û–ì–î–ê –Ω–µ —É–¥–∞–ª—è—Ç—å –±—ç–∫–∞–ø—ã –±–µ–∑ —è–≤–Ω–æ–≥–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**

5. **–í–°–ï–ì–î–ê –ø—Ä–æ–≤–µ—Ä—è–π –Ω–∞–ª–∏—á–∏–µ –±—ç–∫–∞–ø–æ–≤ –ø–µ—Ä–µ–¥ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏**

---

## üìã –ò–ù–§–û–†–ú–ê–¶–ò–Ø –û –ü–†–û–ï–ö–¢–ï

### –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- **–ü—Ä–æ–µ–∫—Ç:** Creatix (AI SaaS –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞)
- **Stack:** Next.js 15.5.4, PostgreSQL, Prisma ORM, NextAuth.js
- **–í–ª–∞–¥–µ–ª–µ—Ü:** useneurox@gmail.com (ADMIN)
- **–Ø–∑—ã–∫ –æ–±—â–µ–Ω–∏—è:** –†—É—Å—Å–∫–∏–π

### –°–µ—Ä–≤–µ—Ä–Ω–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞

**–ü—Ä–æ–¥–∞–∫—à–µ–Ω —Å–µ—Ä–≤–µ—Ä (Timeweb):**
- **IP:** 45.129.128.121
- **SSH:** root@45.129.128.121
- **–ü–∞—Ä–æ–ª—å:** `pzaNtMznbq@hw3`
- **URL:** https://aicreatix.ru
- **–†–µ–≥–∏–æ–Ω:** ru-1 (–†–æ—Å—Å–∏—è)
- **Process Manager:** PM2 (–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: creatix)
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** PostgreSQL –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ `creatix-postgres`

**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:**
- **–ò–º—è –ë–î:** creatix_db
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:** postgres
- **–ü–∞—Ä–æ–ª—å:** postgres
- **–ü–æ—Ä—Ç:** 5432 (localhost, –≤ Docker)
- **Connection String:** `postgresql://postgres:postgres@localhost:5432/creatix_db?schema=public`

---

## üíæ –°–ò–°–¢–ï–ú–ê –†–ï–ó–ï–†–í–ù–û–ì–û –ö–û–ü–ò–†–û–í–ê–ù–ò–Ø

### –£—Ä–æ–≤–Ω–∏ –∑–∞—â–∏—Ç—ã

**–£—Ä–æ–≤–µ–Ω—å 1: –õ–æ–∫–∞–ª—å–Ω—ã–µ –±—ç–∫–∞–ø—ã**
- **–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `/root/backups/` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- **–ß–∞—Å—Ç–æ—Ç–∞:** –ö–∞–∂–¥—ã–µ 6 —á–∞—Å–æ–≤ (00:00, 06:00, 12:00, 18:00)
- **–•—Ä–∞–Ω–µ–Ω–∏–µ:** 30 –¥–Ω–µ–π
- **–°–∫—Ä–∏–ø—Ç:** `/root/backup-db.sh`
- **–§–æ—Ä–º–∞—Ç:** `creatix_db_YYYYMMDD_HHMMSS.sql.gz`
- **–†–∞–∑–º–µ—Ä:** ~20-50 KB (–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –¥–∞–Ω–Ω—ã—Ö)

**–£—Ä–æ–≤–µ–Ω—å 2: –£–¥–∞–ª–µ–Ω–Ω—ã–µ –±—ç–∫–∞–ø—ã (Timeweb S3)**
- **–ü—Ä–æ–≤–∞–π–¥–µ—Ä:** Timeweb Cloud Object Storage
- **Bucket:** `2ed22aca-20d7e6cb-ba88-4f7e-946d-bc34c10f4820`
- **Endpoint:** `https://s3.twcstorage.ru`
- **–†–µ–≥–∏–æ–Ω:** ru-1
- **–ß–∞—Å—Ç–æ—Ç–∞:** –ö–∞–∂–¥—ã–µ 6 —á–∞—Å–æ–≤ (00:30, 06:30, 12:30, 18:30)
- **–•—Ä–∞–Ω–µ–Ω–∏–µ:** 90 –¥–Ω–µ–π
- **–°–∫—Ä–∏–ø—Ç:** `/root/backup-to-s3.sh`
- **–°—Ç–æ–∏–º–æ—Å—Ç—å:** ~100-200‚ÇΩ/–º–µ—Å—è—Ü

**–£—Ä–æ–≤–µ–Ω—å 3: Pre-deploy –±—ç–∫–∞–ø—ã**
- **–ö–æ–≥–¥–∞:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –¥–µ–ø–ª–æ–µ–º
- **–ö—É–¥–∞:** –õ–æ–∫–∞–ª—å–Ω–æ + S3
- **–°–∫—Ä–∏–ø—Ç:** –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ `/root/Creatix/deploy.sh`

### S3 Credentials (Timeweb)

**‚ö†Ô∏è –ö–û–ù–§–ò–î–ï–ù–¶–ò–ê–õ–¨–ù–û:**
```bash
S3_ACCESS_KEY="OM7T9U3HYP0E24DMUQXN"
S3_SECRET_KEY="F9m3Ny12Ejvj5RnNVgQkDduhwSHmEjKSohvzJq07"
S3_BUCKET="2ed22aca-20d7e6cb-ba88-4f7e-946d-bc34c10f4820"
S3_ENDPOINT="https://s3.twcstorage.ru"
```

**–§–∞–π–ª –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:** `/root/.s3-credentials`

### Cron —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ

```cron
*/5 * * * * /root/activate-payments-cron.sh
0 */6 * * * /root/backup-db.sh >> /root/backup.log 2>&1
30 */6 * * * source /root/.s3-credentials && /root/backup-to-s3.sh >> /root/backup-s3.log 2>&1
```

---

## üîß –ü–†–û–¶–ï–î–£–†–´ –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–ò–Ø

### –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –±—ç–∫–∞–ø–∞

```bash
# 1. –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh root@45.129.128.121

# 2. –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ –±—ç–∫–∞–ø—ã
ls -lh /root/backups/

# 3. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–í–ê–ñ–ù–û!)
pm2 stop creatix

# 4. –°–æ–∑–¥–∞—Ç—å –±—ç–∫–∞–ø —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è (–Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π)
/root/backup-db.sh

# 5. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å (–∑–∞–º–µ–Ω–∏ TIMESTAMP –Ω–∞ –Ω—É–∂–Ω—É—é –¥–∞—Ç—É)
gunzip -c /root/backups/creatix_db_YYYYMMDD_HHMMSS.sql.gz | \
  docker exec -i creatix-postgres psql -U postgres -d creatix_db

# 6. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
docker exec creatix-postgres psql -U postgres -d creatix_db -c "SELECT COUNT(*) FROM \"User\";"

# 7. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
pm2 restart creatix

# 8. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
pm2 logs creatix --lines 50
```

### –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ Timeweb S3

```bash
# 1. –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh root@45.129.128.121

# 2. –ó–∞–≥—Ä—É–∑–∏—Ç—å S3 –∫—Ä–µ–¥–µ–Ω—à–∞–ª—ã
source /root/.s3-credentials

# 3. –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ –±—ç–∫–∞–ø—ã –≤ S3
aws s3 ls s3://$S3_BUCKET/ --endpoint-url $S3_ENDPOINT | sort

# 4. –°–∫–∞—á–∞—Ç—å –Ω—É–∂–Ω—ã–π –±—ç–∫–∞–ø
aws s3 cp s3://$S3_BUCKET/creatix_db_YYYYMMDD_HHMMSS.sql.gz \
  /tmp/restore.sql.gz --endpoint-url $S3_ENDPOINT

# 5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å
gunzip -t /tmp/restore.sql.gz

# 6. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
pm2 stop creatix

# 7. –°–æ–∑–¥–∞—Ç—å –±—ç–∫–∞–ø —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
/root/backup-db.sh

# 8. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–∞–∑—É
gunzip -c /tmp/restore.sql.gz | \
  docker exec -i creatix-postgres psql -U postgres -d creatix_db

# 9. –£–¥–∞–ª–∏—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª
rm /tmp/restore.sql.gz

# 10. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–∞–Ω–Ω—ã–µ
docker exec creatix-postgres psql -U postgres -d creatix_db -c "SELECT COUNT(*) FROM \"User\";"

# 11. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
pm2 restart creatix
```

---

## üöÄ –ü–†–û–¶–ï–î–£–†–ê –ë–ï–ó–û–ü–ê–°–ù–û–ì–û –î–ï–ü–õ–û–Ø

### Deploy.sh —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –¥–µ–ø–ª–æ–µ:**
1. ‚úÖ –°–æ–∑–¥–∞–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω—ã–π –±—ç–∫–∞–ø –ë–î
2. ‚úÖ –ë—ç–∫–∞–ø –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤ S3
3. ‚úÖ –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è PM2
4. ‚úÖ –ü–æ–¥—Ç—è–≥–∏–≤–∞–µ—Ç—Å—è –∫–æ–¥ –∏–∑ GitHub
5. ‚úÖ –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
6. ‚úÖ –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è Prisma Client
7. ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è —Å—Ö–µ–º–∞ –ë–î (–ë–ï–ó –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö)
8. ‚úÖ –°–æ–±–∏—Ä–∞–µ—Ç—Å—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω –±–∞–Ω–¥–ª
9. ‚úÖ –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è PM2

**–ö–æ–º–∞–Ω–¥–∞ –¥–µ–ø–ª–æ—è:**
```bash
ssh root@45.129.128.121 "cd /root/Creatix && bash deploy.sh"
```

### –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫ –ø—Ä–∏ –¥–µ–ø–ª–æ–µ

```bash
# 1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
ssh root@45.129.128.121 "pm2 stop creatix"

# 2. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –±—ç–∫–∞–ø–∞ (—Å–º. –≤—ã—à–µ)

# 3. –û—Ç–∫–∞—Ç–∏—Ç—å –∫–æ–¥ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
ssh root@45.129.128.121 "cd /root/Creatix && git reset --hard HEAD~1"

# 4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
ssh root@45.129.128.121 "pm2 restart creatix"
```

---

## üìä –ú–û–ù–ò–¢–û–†–ò–ù–ì –ò –ü–†–û–í–ï–†–ö–ê

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –±—ç–∫–∞–ø–æ–≤

**–õ–æ–∫–∞–ª—å–Ω—ã–µ:**
```bash
ssh root@45.129.128.121 "ls -lh /root/backups/ | tail -5"
```

**S3:**
```bash
ssh root@45.129.128.121 "source /root/.s3-credentials && aws s3 ls s3://\$S3_BUCKET/ --endpoint-url \$S3_ENDPOINT | tail -5"
```

**–õ–æ–≥–∏ –±—ç–∫–∞–ø–æ–≤:**
```bash
# –õ–æ–∫–∞–ª—å–Ω—ã–µ –±—ç–∫–∞–ø—ã
ssh root@45.129.128.121 "tail -20 /root/backup.log"

# S3 –±—ç–∫–∞–ø—ã
ssh root@45.129.128.121 "tail -20 /root/backup-s3.log"
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ë–î

```bash
# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
ssh root@45.129.128.121 "docker exec creatix-postgres psql -U postgres -d creatix_db -c 'SELECT COUNT(*) FROM \"User\";'"

# –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ
ssh root@45.129.128.121 "docker exec creatix-postgres psql -U postgres -d creatix_db -c 'SELECT email, \"createdAt\" FROM \"User\" ORDER BY \"createdAt\" DESC LIMIT 5;'"

# –†–∞–∑–º–µ—Ä –ë–î
ssh root@45.129.128.121 "docker exec creatix-postgres psql -U postgres -d creatix_db -c 'SELECT pg_size_pretty(pg_database_size(current_database()));'"
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–∞

```bash
# –°—Ç–∞—Ç—É—Å PM2
ssh root@45.129.128.121 "pm2 status"

# –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
ssh root@45.129.128.121 "pm2 logs creatix --lines 50 --nostream"

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∏—Å–∫–∞
ssh root@45.129.128.121 "df -h"

# –°—Ç–∞—Ç—É—Å Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
ssh root@45.129.128.121 "docker ps"
```

---

## ‚ö° –ë–´–°–¢–†–´–ï –ö–û–ú–ê–ù–î–´

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º

```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
ssh root@45.129.128.121 "pm2 restart creatix"

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
ssh root@45.129.128.121 "pm2 stop creatix"

# –õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
ssh root@45.129.128.121 "pm2 logs creatix"

# –ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞
ssh root@45.129.128.121 "pm2 reload creatix"
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ë–î

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ psql
ssh root@45.129.128.121 "docker exec -it creatix-postgres psql -U postgres -d creatix_db"

# –°–æ–∑–¥–∞—Ç—å –±—ç–∫–∞–ø –≤—Ä—É—á–Ω—É—é
ssh root@45.129.128.121 "/root/backup-db.sh"

# –ó–∞–≥—Ä—É–∑–∏—Ç—å –±—ç–∫–∞–ø –≤ S3 –≤—Ä—É—á–Ω—É—é
ssh root@45.129.128.121 "source /root/.s3-credentials && /root/backup-to-s3.sh"
```

---

## üéØ –ß–ï–ö–õ–ò–°–¢ –î–õ–Ø AI –ê–°–°–ò–°–¢–ï–ù–¢–ê

### –ü–µ—Ä–µ–¥ –ª—é–±—ã–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ –ë–î:

- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ —Å–≤–µ–∂–∏—Ö –±—ç–∫–∞–ø–æ–≤ (< 6 —á–∞—Å–æ–≤)
- [ ] –°–æ–∑–¥–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –±—ç–∫–∞–ø
- [ ] –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `--accept-data-loss`
- [ ] –ü—Ä–µ–¥—É–ø—Ä–µ–¥–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ —Ä–∏—Å–∫–∞—Ö
- [ ] –ü–æ–ª—É—á–∏—Ç—å —è–≤–Ω–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ

### –ü–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º:

- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ deploy.sh –¥–µ–ª–∞–µ—Ç –±—ç–∫–∞–ø
- [ ] –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∫–æ–¥ –∑–∞–∫–æ–º–º–∏—á–µ–Ω
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç (–µ—Å–ª–∏ –µ—Å—Ç—å)
- [ ] –°–æ–æ–±—â–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é, —á—Ç–æ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –¥–µ–ø–ª–æ–π
- [ ] –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å

### –ï—Å–ª–∏ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞:

- [ ] –ù–ï –ø–∞–Ω–∏–∫–æ–≤–∞—Ç—å
- [ ] –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –±—ç–∫–∞–ø–æ–≤
- [ ] –°–æ–æ–±—â–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –æ –ø—Ä–æ–±–ª–µ–º–µ
- [ ] –ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å –ø–ª–∞–Ω –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
- [ ] –ü–æ–ª—É—á–∏—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–µ—Ä–µ–¥ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ–º

---

## üìû –ö–û–ù–¢–ê–ö–¢–´ –ò –í–ê–ñ–ù–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø

### –í–ª–∞–¥–µ–ª–µ—Ü –ø—Ä–æ–µ–∫—Ç–∞
- **Email:** useneurox@gmail.com
- **–†–æ–ª—å –≤ –ë–î:** ADMIN
- **User ID:** e8c6379f-5846-4fd1-852c-18c28fa53009

### –ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã

**Hosting:** Timeweb Cloud
- –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç: https://timeweb.cloud/
- –¢–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∞: https://timeweb.cloud/help/

**Domain:** aicreatix.ru

**GitHub:** https://github.com/NX-company/Creatix
- Branch: main

---

## üîê –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨ –ö–†–ï–î–ï–ù–®–ê–õ–û–í

### –ì–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –ø–∞—Ä–æ–ª–∏:

1. **SSH –ø–∞—Ä–æ–ª—å:** –¢–æ–ª—å–∫–æ –≤ —ç—Ç–æ–º –¥–æ–∫—É–º–µ–Ω—Ç–µ –∏ —É –≤–ª–∞–¥–µ–ª—å—Ü–∞
2. **S3 –∫—Ä–µ–¥–µ–Ω—à–∞–ª—ã:** `/root/.s3-credentials` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
3. **Database URL:** `/root/Creatix/server.env` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
4. **Environment vars:** `/root/Creatix/.env` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (–∫–æ–ø–∏—Ä—É–µ—Ç—Å—è –∏–∑ server.env)

### –ü—Ä–∞–≤–∏–ª–∞:
- ‚ùå –ù–ò–ö–û–ì–î–ê –Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—å –∫—Ä–µ–¥–µ–Ω—à–∞–ª—ã –≤ Git
- ‚ùå –ù–ò–ö–û–ì–î–ê –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –ø–∞—Ä–æ–ª–∏ –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ
- ‚úÖ –í—Å–µ —Å–µ–∫—Ä–µ—Ç—ã —Ç–æ–ª—å–∫–æ –≤ `.env` —Ñ–∞–π–ª–∞—Ö
- ‚úÖ `.env` —Ñ–∞–π–ª—ã –≤ `.gitignore`

---

## üìö –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –î–û–ö–£–ú–ï–ù–¢–´

- **–ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ S3:** [scripts/setup-s3-backups.md](scripts/setup-s3-backups.md)
- **–°–∫—Ä–∏–ø—Ç –ª–æ–∫–∞–ª—å–Ω—ã—Ö –±—ç–∫–∞–ø–æ–≤:** `/root/backup-db.sh` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- **–°–∫—Ä–∏–ø—Ç S3 –±—ç–∫–∞–ø–æ–≤:** `/root/backup-to-s3.sh` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- **Deploy —Å–∫—Ä–∏–ø—Ç:** [deploy.sh](deploy.sh)

---

## üÜò –ß–¢–û –î–ï–õ–ê–¢–¨ –ü–†–ò –ö–ê–¢–ê–°–¢–†–û–§–ï

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ü–æ—Ç–µ—Ä—è–Ω—ã –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

1. ‚úÖ –í S3 –µ—Å—Ç—å –±—ç–∫–∞–ø—ã –∑–∞ 90 –¥–Ω–µ–π
2. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏ –∏–∑ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –±—ç–∫–∞–ø–∞ –≤ S3 (—Å–º. –ø—Ä–æ—Ü–µ–¥—É—Ä—É –≤—ã—à–µ)
3. –ü—Ä–æ–≤–µ—Ä—å —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö
4. –£–≤–µ–¥–æ–º–∏ –≤–ª–∞–¥–µ–ª—å—Ü–∞

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –°–µ—Ä–≤–µ—Ä –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

1. ‚úÖ –í—Å–µ –±—ç–∫–∞–ø—ã –µ—Å—Ç—å –≤ Timeweb S3
2. –†–∞–∑–≤–µ—Ä–Ω–∏ –Ω–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä
3. –£—Å—Ç–∞–Ω–æ–≤–∏ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (Docker, Node.js, PostgreSQL)
4. –ö–ª–æ–Ω–∏—Ä—É–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
5. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏ –ë–î –∏–∑ S3
6. –ù–∞—Å—Ç—Ä–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏–µ
7. –ó–∞–ø—É—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –°–ª—É—á–∞–π–Ω–æ —É–¥–∞–ª–µ–Ω—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏

1. ‚úÖ –ï—Å—Ç—å –±—ç–∫–∞–ø—ã –∫–∞–∂–¥—ã–µ 6 —á–∞—Å–æ–≤
2. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ù–ï–ú–ï–î–õ–ï–ù–ù–û
3. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ –±–ª–∏–∂–∞–π—à–µ–≥–æ –±—ç–∫–∞–ø–∞ –¥–æ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–∞
4. –£–≤–µ–¥–æ–º–∏—Ç—å –≤–ª–∞–¥–µ–ª—å—Ü–∞ –æ –ø–æ—Ç–µ—Ä–µ –¥–∞–Ω–Ω—ã—Ö –∑–∞ –ø–µ—Ä–∏–æ–¥

---

## ‚úÖ –°–ò–°–¢–ï–ú–ê –†–ê–ë–û–¢–ê–ï–¢ –ü–†–ê–í–ò–õ–¨–ù–û, –ï–°–õ–ò:

1. ‚úÖ –ö–∞–∂–¥—ã–µ 6 —á–∞—Å–æ–≤ —Å–æ–∑–¥–∞—é—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω—ã–µ –±—ç–∫–∞–ø—ã
2. ‚úÖ –ö–∞–∂–¥—ã–µ 6 —á–∞—Å–æ–≤ –±—ç–∫–∞–ø—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤ S3
3. ‚úÖ –ë—ç–∫–∞–ø—ã —É—Å–ø–µ—à–Ω–æ —Ä–∞—Å–ø–∞–∫–æ–≤—ã–≤–∞—é—Ç—Å—è
4. ‚úÖ Deploy –¥–µ–ª–∞–µ—Ç –±—ç–∫–∞–ø –ø–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏
5. ‚úÖ –í S3 bucket –µ—Å—Ç—å —Ñ–∞–π–ª—ã –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 90 –¥–Ω–µ–π
6. ‚úÖ –†–∞–∑–º–µ—Ä –ë–î —Ä–∞—Å—Ç–µ—Ç —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º (–Ω–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏)
7. ‚úÖ –õ–æ–≥–∏ `/root/backup.log` –∏ `/root/backup-s3.log` –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –æ—à–∏–±–æ–∫

---

## üìà –¢–ï–ö–£–©–ò–ô –°–¢–ê–¢–£–° (–ø–æ —Å–æ—Å—Ç–æ—è–Ω–∏—é –Ω–∞ 2025-10-29)

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:** 12 (11 USER, 1 ADMIN)
- **–ü—Ä–æ–µ–∫—Ç–æ–≤:** 0
- **–†–∞–∑–º–µ—Ä –ë–î:** ~20 KB (–ø—É—Å—Ç–∞—è, —Ç–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏)

### –ë—ç–∫–∞–ø—ã
- **–õ–æ–∫–∞–ª—å–Ω—ã–µ:** –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã ‚úÖ
- **S3:** –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç ‚úÖ
- **Pre-deploy:** –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã ‚úÖ

### –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
- ‚ö†Ô∏è –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–ª–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (API –≤–æ–∑–≤—Ä–∞—â–∞–ª 401)
- –ü—Ä–∏—á–∏–Ω–∞: –ü—Ä–æ–±–ª–µ–º–∞ —Å JWT —Ç–æ–∫–µ–Ω–∞–º–∏ –≤ verifyAdmin
- –°—Ç–∞—Ç—É—Å: –î–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, —Ç—Ä–µ–±—É–µ—Ç –¥–∞–ª—å–Ω–µ–π—à–µ–π –æ—Ç–ª–∞–¥–∫–∏

---

## üéì –î–õ–Ø –ù–û–í–û–ô AI –°–ï–°–°–ò–ò

–ï—Å–ª–∏ —Ç—ã - –Ω–æ–≤–∞—è AI —Å–µ—Å—Å–∏—è, –∫–æ—Ç–æ—Ä–∞—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—É —Å —ç—Ç–∏–º –ø—Ä–æ–µ–∫—Ç–æ–º:

1. **–ü–†–û–ß–ò–¢–ê–ô –≠–¢–û–¢ –î–û–ö–£–ú–ï–ù–¢ –ü–û–õ–ù–û–°–¢–¨–Æ** –ø–µ—Ä–µ–¥ –ª—é–±—ã–º–∏ –¥–µ–π—Å—Ç–≤–∏—è–º–∏
2. –ü—Ä–æ–≤–µ—Ä—å —Å—Ç–∞—Ç—É—Å –±—ç–∫–∞–ø–æ–≤: `ssh root@45.129.128.121 "ls -lh /root/backups/"`
3. –ü—Ä–æ–≤–µ—Ä—å S3 –±—ç–∫–∞–ø—ã: —Å–º–æ—Ç—Ä–∏ –∫–æ–º–∞–Ω–¥—ã –≤—ã—à–µ
4. –°–ø—Ä–æ—Å–∏ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ –µ–≥–æ –Ω–∞–º–µ—Ä–µ–Ω–∏—è—Ö –ø–µ—Ä–µ–¥ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏
5. –í–°–ï–ì–î–ê –¥–µ–ª–∞–π –±—ç–∫–∞–ø –ø–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ –ë–î
6. –ü–æ–º–Ω–∏: –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö > —Å–∫–æ—Ä–æ—Å—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-10-29
**–ê–≤—Ç–æ—Ä –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:** Claude (Anthropic) + useneurox
**–í–µ—Ä—Å–∏—è:** 1.0

---

> üí° **–°–æ–≤–µ—Ç:** –î–µ—Ä–∂–∏ —ç—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–º. –ü—Ä–∏ –ª—é–±—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö –≤ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–µ –æ–±–Ω–æ–≤–ª—è–π —ç—Ç—É –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é.
