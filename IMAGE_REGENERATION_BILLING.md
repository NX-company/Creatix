# –°–∏—Å—Ç–µ–º–∞ –æ–ø–ª–∞—Ç—ã –∑–∞ —Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—é/–∑–∞–º–µ–Ω—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

## üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å

**1 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ = 0.1 –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ = 1‚ÇΩ**

---

## üîß –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç

–ö–æ–º–∞–Ω–¥—ã —Ç–∏–ø–∞:
- "–≤—Å—Ç–∞–≤—å —Å—é–¥–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–ª—è–∂–∞"
- "–¥–æ–±–∞–≤—å —Ñ–æ—Ç–æ –∫–æ—Ç–∞"
- "–∑–∞–º–µ–Ω–∏ —ç—Ç–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞ –ª–æ–≥–æ—Ç–∏–ø"

### 2. AI Editor —Å–æ–∑–¥–∞—ë—Ç IMAGE_PLACEHOLDER

```html
<img src="IMAGE_PLACEHOLDER" alt="beach photo" />
```

### 3. –°–∏—Å—Ç–µ–º–∞ —Å—á–∏—Ç–∞–µ—Ç –Ω–æ–≤—ã–µ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã

```typescript
const newImageCount = countNewImagePlaceholders(originalHTML, editedHTML)
// originalHTML: 3 –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–∞
// editedHTML: 5 –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–≤
// newImageCount = 2
```

### 4. –°–ø–∏—Å–∞–Ω–∏–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–π

```typescript
const generationCost = newImageCount * 0.1 // 2 √ó 0.1 = 0.2 –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

await fetch('/api/user/consume-generation-fractional', {
  method: 'POST',
  body: JSON.stringify({
    amount: 0.2,
    reason: 'Image regeneration (2 images)'
  })
})
```

### 5. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —á–µ—Ä–µ–∑ Flux

IMAGE_PLACEHOLDER –∑–∞–º–µ–Ω—è—é—Ç—Å—è –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ Flux Schnell

---

## üìä –ü—Ä–∏–º–µ—Ä—ã

### –ü—Ä–∏–º–µ—Ä 1: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ 1 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

```
–ò—Å—Ö–æ–¥–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç: 5 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
–ö–æ–º–∞–Ω–¥–∞: "–≤—Å—Ç–∞–≤—å —Å—é–¥–∞ —Ñ–æ—Ç–æ —Å–æ–±–∞–∫–∏"
–ù–æ–≤—ã—Ö IMAGE_PLACEHOLDER: 1

–°–ø–∏—Å–∞–Ω–æ: 0.1 –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ (1‚ÇΩ)
–ò—Ç–æ–≥–æ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–µ: 6 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
```

### –ü—Ä–∏–º–µ—Ä 2: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ 3 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

```
–ò—Å—Ö–æ–¥–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç: 2 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
–ö–æ–º–∞–Ω–¥–∞: "–¥–æ–±–∞–≤—å 3 —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –ø—Ä–æ–¥—É–∫—Ç–æ–≤"
–ù–æ–≤—ã—Ö IMAGE_PLACEHOLDER: 3

–°–ø–∏—Å–∞–Ω–æ: 0.3 –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ (3‚ÇΩ)
–ò—Ç–æ–≥–æ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–µ: 5 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
```

### –ü—Ä–∏–º–µ—Ä 3: –¢–µ–∫—Å—Ç–æ–≤–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ë–ï–ó –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

```
–ö–æ–º–∞–Ω–¥–∞: "–∏–∑–º–µ–Ω–∏ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –Ω–∞ –∫—Ä–∞—Å–Ω—ã–π"
–ù–æ–≤—ã—Ö IMAGE_PLACEHOLDER: 0

–°–ø–∏—Å–∞–Ω–æ: 0 –≥–µ–Ω–µ—Ä–∞—Ü–∏–π (0‚ÇΩ) ‚úÖ –ë–µ—Å–ø–ª–∞—Ç–Ω–æ!
```

---

## üõ°Ô∏è –ó–∞—â–∏—Ç–∞ –æ—Ç –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–π

### 1. –ü–æ–¥—Å—á—ë—Ç —Ç–æ–ª—å–∫–æ –ù–û–í–´–• –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

```typescript
// –ï—Å–ª–∏ –±—ã–ª–æ 5 IMAGE_PLACEHOLDER –∏ —Å—Ç–∞–ª–æ 5 - —Å–ø–∏—Å–∞–Ω–∏—è –ù–ï–¢
// –ï—Å–ª–∏ –±—ã–ª–æ 5 –∏ —Å—Ç–∞–ª–æ 8 - —Å–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è 0.3 –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≥–µ–Ω–µ—Ä–∞—Ü–∏–π

```typescript
if (totalAvailable < generationCost) {
  return error: 'Insufficient generations'
}
```

### 3. –°–ø–∏—Å–∞–Ω–∏–µ –ü–ï–†–ï–î –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π

–ì–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –î–û —Ç–æ–≥–æ, –∫–∞–∫ –Ω–∞—á–Ω—ë—Ç—Å—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

---

## üìÅ –§–∞–π–ª—ã

| –§–∞–π–ª | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------|-----------|
| `lib/imageRegeneration.ts` | –ü–æ–¥—Å—á—ë—Ç –Ω–æ–≤—ã—Ö IMAGE_PLACEHOLDER |
| `app/api/user/consume-generation-fractional/route.ts` | API –¥–ª—è —Å–ø–∏—Å–∞–Ω–∏—è –¥—Ä–æ–±–Ω—ã—Ö –≥–µ–Ω–µ—Ä–∞—Ü–∏–π |
| `components/ChatPanel.tsx:534-576` | –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ |
| `app/api/flux-generate/route.ts:26-105` | –°–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è –ø—Ä—è–º–æ–π —Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ |

---

## ‚úÖ –ò—Ç–æ–≥

**–õ—é–±–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ –∑–∞–ø—Ä–æ—Å—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–ø–∏—Å—ã–≤–∞–µ—Ç 0.1 –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏!**

–°—Ü–µ–Ω–∞—Ä–∏–∏:
- ‚úÖ "–í—Å—Ç–∞–≤—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ" ‚Üí +0.1 –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- ‚úÖ "–î–æ–±–∞–≤—å 5 —Ñ–æ—Ç–æ" ‚Üí +0.5 –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- ‚úÖ "–ó–∞–º–µ–Ω–∏ —ç—Ç–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ" ‚Üí +0.1 –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- ‚úÖ "–ò–∑–º–µ–Ω–∏ —Ç–µ–∫—Å—Ç/—Ü–≤–µ—Ç/—Å—Ç–∏–ª—å" ‚Üí 0 –≥–µ–Ω–µ—Ä–∞—Ü–∏–π (–±–µ—Å–ø–ª–∞—Ç–Ω–æ)

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: 2025-01-21
